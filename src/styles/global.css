@import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,300..800;1,9..40,300..800&family=Instrument+Serif:ital@0;1&family=JetBrains+Mono:wght@400;500;600;700&display=swap');

/* ── Design Tokens ── */
:root {
  --bg-primary: #0a0a0f;
  --bg-secondary: #111118;
  --bg-card: #16161f;
  --bg-card-hover: #1c1c28;
  --bg-elevated: #1e1e2a;
  --border: #2a2a3a;
  --border-subtle: #1f1f2e;
  --text-primary: #f0f0f5;
  --text-secondary: #8888a0;
  --text-muted: #555570;
  --accent-emerald: #34d399;
  --accent-rose: #fb7185;
  --accent-amber: #fbbf24;
  --accent-sky: #38bdf8;
  --accent-violet: #a78bfa;
  --accent-teal: #2dd4bf;
  --font-sans: 'DM Sans', system-ui, sans-serif;
  --font-serif: 'Instrument Serif', Georgia, serif;
  --font-mono: 'JetBrains Mono', ui-monospace, monospace;
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
}

/* ── 1. Reset & Base ── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; -webkit-text-size-adjust: 100%; }
body {
  background: var(--bg-primary);
  color: var(--text-primary);
  font-family: var(--font-sans);
  font-size: 15px;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  min-height: 100vh;
  overflow-x: hidden;
}
img, svg { display: block; max-width: 100%; }
a { color: var(--accent-emerald); text-decoration: none; }
button { font-family: inherit; cursor: pointer; }

/* ── 2. Custom Scrollbar ── */
::-webkit-scrollbar { width: 6px; height: 6px; }
::-webkit-scrollbar-track { background: var(--bg-primary); }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }
* { scrollbar-width: thin; scrollbar-color: var(--border) var(--bg-primary); }

/* ── 3. Ambient Effects ── */
.ambient {
  position: fixed; inset: 0; pointer-events: none; z-index: 0;
}
.ambient::before {
  content: '';
  position: absolute; inset: 0;
  background:
    radial-gradient(ellipse 60% 40% at 10% 0%, rgba(52,211,153,0.06) 0%, transparent 70%),
    radial-gradient(ellipse 50% 50% at 90% 10%, rgba(56,189,248,0.04) 0%, transparent 60%),
    radial-gradient(ellipse 40% 30% at 50% 100%, rgba(167,139,250,0.05) 0%, transparent 60%);
}
.ambient::after {
  content: '';
  position: absolute; inset: 0;
  opacity: 0.03;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 180px;
}

/* ── 4. Dashboard Container ── */
.dashboard {
  position: relative; z-index: 1;
  max-width: 1440px;
  margin: 0 auto;
  padding: 1rem;
}
@media (min-width: 768px) {
  .dashboard { padding: 2.5rem; }
}

/* ── 5. Header ── */
.header { display: flex; flex-direction: column; gap: 0.75rem; margin-bottom: 2rem; }
.header h1 {
  font-family: var(--font-serif);
  font-style: italic;
  font-size: clamp(2rem, 5vw, 3.25rem);
  font-weight: 400;
  line-height: 1.1;
  background: linear-gradient(135deg, var(--text-primary) 0%, var(--accent-emerald) 50%, var(--accent-sky) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.header .subtitle {
  font-size: 0.7rem;
  font-weight: 500;
  letter-spacing: 0.15em;
  text-transform: uppercase;
  color: var(--text-muted);
  font-variant: small-caps;
}
.badge {
  display: inline-flex;
  align-items: center;
  padding: 0.25rem 0.65rem;
  border-radius: 100px;
  font-size: 0.7rem;
  font-weight: 600;
  letter-spacing: 0.03em;
  border: 1px solid var(--border-subtle);
  background: var(--bg-card);
  color: var(--text-secondary);
}
.badge--emerald { color: var(--accent-emerald); border-color: rgba(52,211,153,0.25); }
.badge--rose { color: var(--accent-rose); border-color: rgba(251,113,133,0.25); }
.badge--amber { color: var(--accent-amber); border-color: rgba(251,191,36,0.25); }
.badge--sky { color: var(--accent-sky); border-color: rgba(56,189,248,0.25); }
.badges { display: flex; gap: 0.5rem; flex-wrap: wrap; }
@media (min-width: 768px) {
  .header { flex-direction: row; align-items: flex-end; justify-content: space-between; }
}

/* ── 6. Tab Navigation ── */
.tabs {
  display: flex; gap: 0.5rem; overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  padding: 0.75rem 0;
  position: sticky; top: 0; z-index: 100;
  background: var(--bg-primary);
  border-bottom: 1px solid var(--border-subtle);
}
.tab {
  white-space: nowrap;
  padding: 0.5rem 1rem;
  border-radius: 100px;
  font-size: 0.8rem;
  font-weight: 500;
  background: transparent;
  border: 1px solid var(--border-subtle);
  color: var(--text-muted);
  cursor: pointer;
  transition: all 0.2s;
}
.tab.active {
  background: var(--bg-card);
  color: var(--text-primary);
  border-color: var(--accent-emerald);
}
.tab:hover:not(.active) { color: var(--text-secondary); border-color: var(--border); }

/* ── 7. Tab Panels ── */
.tab-panel { display: none; }
.tab-panel.active { display: block; }

/* ── 8. KPI Strip ── */
.kpi-strip {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 1px;
  background: var(--border-subtle);
  border-radius: var(--radius-lg);
  overflow: hidden;
  margin-bottom: 2rem;
}
@media (min-width: 768px) {
  .kpi-strip { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
}
.kpi-card {
  background: var(--bg-card);
  padding: 1.25rem;
  display: flex; flex-direction: column; gap: 0.35rem;
}
.kpi-card .kpi-label {
  font-size: 0.65rem;
  font-weight: 600;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--text-muted);
}
.kpi-card .kpi-value {
  font-family: var(--font-mono);
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--text-primary);
  line-height: 1.2;
}
.kpi-card .kpi-sub {
  font-size: 0.75rem;
  color: var(--text-secondary);
}
.kpi-card .kpi-sub.positive { color: var(--accent-emerald); }
.kpi-card .kpi-sub.negative { color: var(--accent-rose); }

/* ── 9. Cards ── */
.card {
  background: var(--bg-card);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-lg);
  padding: 1rem;
  transition: border-color 0.25s;
}
.card:hover { border-color: var(--border); }
@media (min-width: 768px) {
  .card { padding: 1.5rem; }
}
.card-header {
  display: flex; align-items: center; gap: 0.5rem;
  margin-bottom: 1rem;
}
.card-header .dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  background: var(--accent-emerald);
  flex-shrink: 0;
}
.card-header .dot--rose { background: var(--accent-rose); }
.card-header .dot--amber { background: var(--accent-amber); }
.card-header .dot--sky { background: var(--accent-sky); }
.card-header .dot--violet { background: var(--accent-violet); }
.card-header .dot--teal { background: var(--accent-teal); }
.card-title {
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--text-primary);
}

/* ── 10. Grid Layouts ── */
.grid-2, .grid-3 {
  display: grid; gap: 1rem;
  grid-template-columns: 1fr;
  margin-bottom: 1.5rem;
}
@media (min-width: 768px) {
  .grid-2 { grid-template-columns: repeat(2, 1fr); }
  .grid-3 { grid-template-columns: repeat(3, 1fr); }
}

/* ── 11. Chart Containers ── */
.chart-container { position: relative; width: 100%; height: 220px; }
.chart-container-lg { height: 280px; }
@media (min-width: 768px) {
  .chart-container { height: 280px; }
  .chart-container-lg { height: 350px; }
}

/* ── 12. Section Headers ── */
.section-header { margin-bottom: 1.25rem; }
.section-header h2 {
  font-family: var(--font-serif);
  font-style: italic;
  font-size: clamp(1.25rem, 3vw, 1.75rem);
  font-weight: 400;
  color: var(--text-primary);
  line-height: 1.2;
}
.section-header .section-subtitle {
  font-size: 0.78rem;
  color: var(--text-muted);
  margin-top: 0.25rem;
}

/* ── 13. Category Bars ── */
.category-row {
  display: grid;
  grid-template-columns: 100px 1fr auto;
  align-items: center;
  gap: 0.75rem;
  padding: 0.5rem 0;
}
@media (min-width: 768px) {
  .category-row { grid-template-columns: 140px 1fr auto; }
}
.category-name {
  display: flex; align-items: center; gap: 0.5rem;
  font-size: 0.8rem;
  color: var(--text-secondary);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.category-name .cat-dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
}
.category-bar-track {
  height: 6px;
  background: var(--bg-elevated);
  border-radius: 3px;
  overflow: hidden;
}
.category-bar-fill {
  height: 100%;
  border-radius: 3px;
  background: var(--accent-emerald);
  transition: width 0.6s cubic-bezier(0.16, 1, 0.3, 1);
}
.category-amount {
  font-family: var(--font-mono);
  font-size: 0.8rem;
  font-weight: 500;
  color: var(--text-primary);
  text-align: right;
  white-space: nowrap;
}

/* ── 14. Merchant List ── */
.merchant-row {
  display: grid;
  grid-template-columns: 2rem 1fr auto auto;
  align-items: center;
  gap: 0.75rem;
  padding: 0.6rem 0.5rem;
  border-radius: var(--radius-sm);
  transition: background 0.15s;
}
.merchant-row:hover { background: var(--bg-card-hover); }
.merchant-rank {
  font-family: var(--font-mono);
  font-size: 0.7rem;
  color: var(--text-muted);
  text-align: center;
}
.merchant-name { font-size: 0.85rem; color: var(--text-secondary); }
.merchant-amount {
  font-family: var(--font-mono);
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--text-primary);
}
.merchant-count {
  font-size: 0.7rem;
  color: var(--text-muted);
  white-space: nowrap;
}

/* ── 15. Insight Cards ── */
.insight-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1rem;
  margin-bottom: 1.5rem;
}
.insight-card {
  background: var(--bg-card);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-lg);
  padding: 1.25rem;
  position: relative;
  overflow: hidden;
}
.insight-card::before {
  content: '';
  position: absolute; top: 0; left: 0; right: 0;
  height: 3px;
}
.insight-card--warning::before { background: linear-gradient(90deg, var(--accent-amber), transparent); }
.insight-card--success::before { background: linear-gradient(90deg, var(--accent-emerald), transparent); }
.insight-card--tip::before { background: linear-gradient(90deg, var(--accent-sky), transparent); }
.insight-card--info::before { background: linear-gradient(90deg, var(--accent-violet), transparent); }
.insight-icon {
  width: 2rem; height: 2rem;
  border-radius: var(--radius-sm);
  display: flex; align-items: center; justify-content: center;
  font-size: 1rem;
  margin-bottom: 0.75rem;
  background: var(--bg-elevated);
}
.insight-title { font-size: 0.85rem; font-weight: 600; color: var(--text-primary); margin-bottom: 0.3rem; }
.insight-desc { font-size: 0.78rem; color: var(--text-secondary); line-height: 1.5; margin-bottom: 0.75rem; }
.insight-metric {
  display: inline-flex;
  font-family: var(--font-mono);
  font-size: 0.75rem;
  font-weight: 600;
  padding: 0.2rem 0.6rem;
  border-radius: 100px;
  background: var(--bg-elevated);
  color: var(--text-primary);
}

/* ── 16. Weekday Heatmap ── */
.heatmap-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 0.5rem;
}
@media (min-width: 640px) {
  .heatmap-grid { grid-template-columns: repeat(7, 1fr); }
}
.heatmap-cell {
  background: var(--bg-elevated);
  border-radius: var(--radius-sm);
  padding: 0.75rem 0.5rem;
  text-align: center;
  display: flex; flex-direction: column; gap: 0.25rem; align-items: center;
}
.heatmap-cell .day-label { font-size: 0.65rem; text-transform: uppercase; letter-spacing: 0.1em; color: var(--text-muted); }
.heatmap-cell .day-value { font-family: var(--font-mono); font-size: 0.9rem; font-weight: 600; color: var(--text-primary); }

/* ── 17. Transaction Table ── */
.txn-table { width: 100%; border-collapse: collapse; }
.txn-table th {
  text-align: left;
  padding: 0.6rem 0.75rem;
  font-size: 0.65rem;
  font-weight: 600;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--text-muted);
  border-bottom: 1px solid var(--border-subtle);
}
.txn-table td {
  padding: 0.65rem 0.75rem;
  font-size: 0.82rem;
  color: var(--text-secondary);
  border-bottom: 1px solid var(--border-subtle);
}
.txn-table tbody tr { transition: background 0.15s; }
.txn-table tbody tr:hover { background: var(--bg-card-hover); }
.txn-table .txn-amount {
  font-family: var(--font-mono);
  font-weight: 600;
  color: var(--text-primary);
}
.txn-table .txn-amount.debit { color: var(--accent-rose); }
.txn-table .txn-amount.credit { color: var(--accent-emerald); }

/* ── 18. Search/Filter Bar ── */
.filter-bar { display: flex; gap: 0.75rem; flex-wrap: wrap; margin-bottom: 1.5rem; }
.filter-input {
  flex: 1; min-width: 200px;
  background: var(--bg-elevated);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-sm);
  padding: 0.6rem 1rem;
  color: var(--text-primary);
  font-family: var(--font-sans);
  font-size: 0.85rem;
  outline: none;
  transition: border-color 0.2s;
}
.filter-input:focus { border-color: var(--accent-emerald); }
.filter-input::placeholder { color: var(--text-muted); }
.filter-select {
  background: var(--bg-elevated);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-sm);
  padding: 0.6rem 1rem;
  color: var(--text-primary);
  font-size: 0.8rem;
  cursor: pointer;
  appearance: none;
  min-width: 140px;
}

/* ── 19. Pagination ── */
.pagination {
  display: flex; align-items: center; gap: 0.35rem;
  justify-content: center;
  margin-top: 1.5rem;
}
.pagination-btn {
  min-width: 2rem; height: 2rem;
  display: flex; align-items: center; justify-content: center;
  border-radius: var(--radius-sm);
  font-size: 0.8rem;
  font-family: var(--font-mono);
  border: 1px solid var(--border-subtle);
  background: transparent;
  color: var(--text-secondary);
  transition: all 0.2s;
}
.pagination-btn:hover { border-color: var(--border); color: var(--text-primary); }
.pagination-btn.active {
  background: var(--accent-emerald);
  border-color: var(--accent-emerald);
  color: var(--bg-primary);
  font-weight: 700;
}

/* ── 20. Animations ── */
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}
.fade-in-up {
  animation: fadeInUp 0.6s cubic-bezier(0.16, 1, 0.3, 1) both;
}
.delay-1 { animation-delay: 0.05s; }
.delay-2 { animation-delay: 0.1s; }
.delay-3 { animation-delay: 0.15s; }
.delay-4 { animation-delay: 0.2s; }
.delay-5 { animation-delay: 0.25s; }
.delay-6 { animation-delay: 0.3s; }
.delay-7 { animation-delay: 0.35s; }
.delay-8 { animation-delay: 0.4s; }

/* ── 21. Footer ── */
.footer {
  text-align: center;
  padding: 2rem 0;
  margin-top: 3rem;
  border-top: 1px solid var(--border-subtle);
  font-size: 0.75rem;
  color: var(--text-muted);
}

/* ── 22. Mobile Transaction Cards ── */
@media (max-width: 640px) {
  .txn-table thead { display: none; }
  .txn-table tbody tr {
    display: flex; flex-wrap: wrap;
    padding: 0.75rem 0;
    border-bottom: 1px solid var(--border-subtle);
    gap: 0.25rem;
  }
  .txn-table td { border: none; padding: 0.15rem 0; }
  .txn-table td:nth-child(1) { width: 100%; font-size: 0.7rem; }
  .txn-table td:nth-child(2) { width: 60%; }
  .txn-table td:nth-child(3) { display: none; }
  .txn-table td:nth-child(4) { width: 40%; text-align: right; }
  .txn-table td:nth-child(5) { display: none; }
}

/* ── 23. Empty States ── */
.empty-state {
  text-align: center;
  padding: 3rem;
  color: var(--text-muted);
}
.empty-state .empty-icon { font-size: 2rem; margin-bottom: 0.75rem; opacity: 0.5; }
.empty-state p { font-size: 0.85rem; }

/* ── 24. Loading Spinner ── */
@keyframes pulse {
  0%, 100% { opacity: 0.3; transform: scale(0.8); }
  50% { opacity: 1; transform: scale(1); }
}
.loading-dots { display: flex; gap: 0.4rem; align-items: center; justify-content: center; padding: 2rem; }
.loading-dots span {
  width: 8px; height: 8px;
  border-radius: 50%;
  background: var(--accent-emerald);
  animation: pulse 1.2s ease-in-out infinite;
}
.loading-dots span:nth-child(2) { animation-delay: 0.15s; }
.loading-dots span:nth-child(3) { animation-delay: 0.3s; }

/* ── Utility: Mono numbers ── */
.mono { font-family: var(--font-mono); }
.text-emerald { color: var(--accent-emerald); }
.text-rose { color: var(--accent-rose); }
.text-amber { color: var(--accent-amber); }
.text-sky { color: var(--accent-sky); }
.text-violet { color: var(--accent-violet); }
.text-teal { color: var(--accent-teal); }
.text-muted { color: var(--text-muted); }
.text-secondary { color: var(--text-secondary); }

/* ================================================================
   SPA-SPECIFIC STYLES
   ================================================================ */

/* Buttons */
.btn { display: inline-flex; align-items: center; gap: 0.4rem; padding: 0.5rem 1rem; border-radius: var(--radius-sm); font-size: 0.8rem; font-weight: 500; border: 1px solid var(--border-subtle); background: var(--bg-card); color: var(--text-primary); cursor: pointer; transition: all 0.2s; font-family: var(--font-sans); }
.btn:hover { border-color: var(--border); background: var(--bg-card-hover); }
.btn-upload { background: rgba(52,211,153,0.1); border-color: rgba(52,211,153,0.25); color: var(--accent-emerald); }
.btn-upload:hover { background: rgba(52,211,153,0.18); border-color: rgba(52,211,153,0.4); }
.btn-back { background: transparent; border: none; color: var(--accent-sky); padding: 0.4rem 0; font-weight: 500; }
.btn-back:hover { color: var(--text-primary); }
.btn-export { background: rgba(139,92,246,0.1); border-color: rgba(139,92,246,0.25); color: var(--accent-violet); white-space: nowrap; }
.btn-export:hover { background: rgba(139,92,246,0.18); }

/* Modal */
.modal-overlay { position: fixed; inset: 0; z-index: 1000; background: rgba(0,0,0,0.7); backdrop-filter: blur(8px); display: none; align-items: center; justify-content: center; padding: 1rem; }
.modal-overlay.open { display: flex; }
.modal { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-lg); width: 100%; max-width: 520px; overflow: hidden; animation: fadeInUp 0.3s ease; }
.modal-header { display: flex; align-items: center; justify-content: space-between; padding: 1.25rem 1.5rem; border-bottom: 1px solid var(--border-subtle); }
.modal-header h3 { font-family: var(--font-serif); font-style: italic; font-size: 1.3rem; font-weight: 400; }
.modal-close { background: none; border: none; color: var(--text-muted); font-size: 1.5rem; cursor: pointer; padding: 0; line-height: 1; }
.modal-close:hover { color: var(--text-primary); }
.modal-body { padding: 1.5rem; }

/* Dropzone */
.dropzone { border: 2px dashed var(--border); border-radius: var(--radius); padding: 3rem 2rem; text-align: center; cursor: pointer; transition: border-color 0.2s, background 0.2s; }
.dropzone:hover, .dropzone.dragover { border-color: var(--accent-emerald); background: rgba(52,211,153,0.04); }
.dropzone-text { font-size: 0.95rem; color: var(--text-secondary); margin-top: 1rem; }
.dropzone-sub { font-size: 0.8rem; color: var(--text-muted); margin-top: 0.5rem; }
.dropzone-browse { color: var(--accent-emerald); cursor: pointer; text-decoration: underline; }

/* Upload Progress */
.upload-progress { padding: 1rem 0; }
.progress-steps { display: flex; flex-direction: column; gap: 0.75rem; }
.progress-step { display: flex; align-items: center; gap: 0.75rem; padding: 0.6rem 0.75rem; border-radius: var(--radius-sm); font-size: 0.85rem; color: var(--text-muted); transition: all 0.3s; }
.progress-step.active { color: var(--accent-sky); background: rgba(56,189,248,0.06); }
.progress-step.done { color: var(--accent-emerald); }
.progress-step.error { color: var(--accent-rose); }
.progress-step-icon { width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.75rem; flex-shrink: 0; border: 1.5px solid var(--border-subtle); }
.progress-step.active .progress-step-icon { border-color: var(--accent-sky); animation: pulse 1.5s infinite; }
.progress-step.done .progress-step-icon { border-color: var(--accent-emerald); background: rgba(52,211,153,0.15); }
.progress-step.error .progress-step-icon { border-color: var(--accent-rose); background: rgba(251,113,133,0.15); }
@keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.5; } }
.progress-status { margin-top: 1rem; font-size: 0.8rem; color: var(--text-muted); text-align: center; }

/* Chart sections (JS-rendered) */
.chart-section { margin-bottom: 1.5rem; background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: var(--radius-lg); padding: 1.25rem; }
.chart-section:hover { border-color: var(--border); }
.chart-title { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.06em; color: var(--text-secondary); font-weight: 600; margin-bottom: 1rem; font-family: var(--font-sans); }
.chart-wrap { position: relative; width: 100%; height: 280px; }
.chart-wrap-sq { height: 260px; }
.chart-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }
.chart-half { flex: 1; }
@media (max-width: 768px) {
  .chart-wrap { height: 220px; }
  .chart-wrap-sq { height: 200px; }
  .chart-row { grid-template-columns: 1fr; }
}

/* KPI overrides for JS-rendered */
.kpi-balance .kpi-value { color: var(--text-primary); }
.kpi-savings .kpi-value { color: var(--accent-sky); }
.kpi-income .kpi-value { color: var(--accent-emerald); }
.kpi-spending .kpi-value { color: var(--accent-rose); }
.kpi-rate .kpi-value { color: var(--accent-amber); }
.kpi-count .kpi-value { color: var(--accent-violet); }

/* Transaction filters */
.tx-filters { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 1rem; align-items: center; }
.tx-filters .filter-input { flex: 1; min-width: 180px; }
.tx-filters .filter-select { min-width: 130px; }
.filter-label { font-size: 0.7rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em; }
.filter-month { min-width: 130px !important; flex: 0 !important; }
.filter-amt { min-width: 80px !important; max-width: 100px; flex: 0 !important; }
@media (max-width: 640px) {
  .tx-filters { gap: 0.4rem; }
  .tx-filters .filter-input { min-width: 100%; }
  .tx-filters .filter-select { min-width: calc(50% - 0.2rem); flex: 1; }
  .filter-month, .filter-amt { min-width: calc(50% - 0.2rem) !important; flex: 1 !important; }
}

/* Transaction table (JS-rendered) */
.tx-summary { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 0.75rem; }
.tx-table-wrap { overflow-x: auto; -webkit-overflow-scrolling: touch; }
.tx-table { width: 100%; border-collapse: collapse; font-size: 0.82rem; }
.tx-table th { text-align: left; padding: 0.6rem 0.5rem; color: var(--text-muted); font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.08em; font-weight: 600; border-bottom: 1px solid var(--border); white-space: nowrap; }
.tx-table td { padding: 0.55rem 0.5rem; border-bottom: 1px solid var(--border-subtle); color: var(--text-secondary); }
.tx-table tr:hover td { background: rgba(255,255,255,0.015); }
.tx-row { cursor: pointer; }
.tx-desc { font-weight: 500; color: var(--text-primary) !important; max-width: 280px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.amt-positive { color: var(--accent-emerald) !important; font-family: var(--font-mono); font-weight: 500; text-align: right; white-space: nowrap; }
.amt-negative { color: var(--accent-rose) !important; font-family: var(--font-mono); font-weight: 500; text-align: right; white-space: nowrap; }
.sortable { cursor: pointer; user-select: none; }
.sortable:hover { color: var(--text-primary); }

/* Transaction detail row */
.tx-detail-row td { background: var(--bg-elevated) !important; padding: 1rem !important; border-bottom: 1px solid var(--border) !important; }
.tx-detail-grid { display: grid; grid-template-columns: auto 1fr auto 1fr; gap: 0.4rem 1rem; font-size: 0.8rem; }
.detail-label { color: var(--text-muted); font-weight: 500; }
.detail-value { color: var(--text-primary); }
@media (max-width: 640px) {
  .tx-detail-grid { grid-template-columns: auto 1fr; }
}

/* Mobile transaction cards */
@media (max-width: 640px) {
  .tx-table thead { display: none; }
  .tx-table tbody tr { display: flex; flex-wrap: wrap; padding: 0.75rem 0; border-bottom: 1px solid var(--border-subtle); gap: 0.15rem; align-items: baseline; }
  .tx-table td { border: none; padding: 0.1rem 0; }
  .tx-table td:nth-child(1) { width: 100%; font-size: 0.7rem; color: var(--text-muted); font-family: var(--font-mono); }
  .tx-table td:nth-child(2) { width: 55%; font-size: 0.85rem; }
  .tx-table td:nth-child(3) { display: none; }
  .tx-table td:nth-child(4) { width: 45%; text-align: right; font-size: 0.85rem; }
  .tx-table td:nth-child(5) { display: none; }
  .tx-desc { max-width: none; }
}

/* Pagination */
.tx-pager { display: flex; align-items: center; justify-content: center; gap: 0.3rem; margin-top: 1rem; flex-wrap: wrap; }
.pager-btn { min-width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 6px; border: 1px solid var(--border-subtle); background: var(--bg-card); color: var(--text-secondary); font-size: 0.8rem; cursor: pointer; transition: all 0.15s; font-family: var(--font-sans); }
.pager-btn:hover:not(.active):not(.disabled) { border-color: var(--border); background: var(--bg-card-hover); color: var(--text-primary); }
.pager-btn.active { background: var(--accent-emerald); border-color: var(--accent-emerald); color: #000; font-weight: 600; }
.pager-btn.disabled { opacity: 0.3; cursor: not-allowed; }
.pager-dots { color: var(--text-muted); font-size: 0.8rem; padding: 0 0.2rem; }

/* Category cards */
.cat-list { display: flex; flex-direction: column; gap: 0.5rem; margin-top: 1rem; }
.cat-card { display: flex; align-items: center; gap: 0.75rem; padding: 0.85rem 1rem; background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: var(--radius-sm); cursor: pointer; transition: all 0.2s; }
.cat-card:hover { border-color: var(--border); background: var(--bg-card-hover); transform: translateX(2px); }
.cat-color-bar { width: 4px; height: 36px; border-radius: 2px; flex-shrink: 0; }
.cat-info { flex: 1; min-width: 0; }
.cat-name { font-size: 0.88rem; font-weight: 600; color: var(--text-primary); }
.cat-meta { font-size: 0.72rem; color: var(--text-muted); margin-top: 0.15rem; }
.cat-right { text-align: right; flex-shrink: 0; }
.cat-total { font-family: var(--font-mono); font-size: 0.9rem; font-weight: 500; color: var(--text-primary); }
.cat-pct { font-size: 0.7rem; color: var(--text-muted); margin-top: 0.1rem; }

/* Merchant grid */
.merch-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 0.75rem; margin-top: 1rem; }
.merch-card { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: var(--radius-sm); padding: 1rem 1.25rem; cursor: pointer; transition: all 0.2s; }
.merch-card:hover { border-color: var(--border); background: var(--bg-card-hover); transform: translateY(-1px); }
.merch-name { font-size: 0.88rem; font-weight: 600; color: var(--text-primary); margin-bottom: 0.4rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.merch-meta { display: flex; gap: 0.75rem; font-size: 0.78rem; color: var(--text-muted); }
.merch-meta span:first-child { color: var(--accent-rose); font-family: var(--font-mono); font-weight: 500; }
.merch-count { color: var(--text-muted); }

/* Drilldown */
.drill-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem; }
.drill-title { font-family: var(--font-serif); font-style: italic; font-size: 1.5rem; font-weight: 400; }

/* Insight cards (JS-rendered variants) */
.insight-warning { border-left: 3px solid var(--accent-amber); }
.insight-success { border-left: 3px solid var(--accent-emerald); }
.insight-tip { border-left: 3px solid var(--accent-sky); }
.insight-info { border-left: 3px solid var(--accent-violet); }
.insight-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; flex-wrap: wrap; }
.insight-header .insight-icon { font-size: 1rem; }
.insight-header .insight-title { font-size: 0.88rem; font-weight: 600; color: var(--text-primary); flex: 1; }
.insight-header .insight-metric { font-family: var(--font-mono); font-size: 0.72rem; padding: 0.2rem 0.5rem; background: rgba(255,255,255,0.04); border-radius: 4px; color: var(--text-primary); }
.insight-card .insight-desc { font-size: 0.8rem; line-height: 1.55; color: var(--text-secondary); }
.insights-grid .insight-card { background: var(--bg-card); border: 1px solid var(--border-subtle); border-radius: var(--radius); padding: 1.25rem; transition: border-color 0.2s; }
.insights-grid .insight-card:hover { border-color: var(--border); }
